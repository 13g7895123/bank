# 銀行財報系統功能測試報告 - 113Q4

> 測試日期：2025-11-29
> 測試期間：113Q4（民國113年第四季）

## 測試摘要

| 項目 | 數量 | 百分比 |
|------|------|--------|
| 總測試銀行數 | 38 家 | 100% |
| 下載成功 | 18 家 | 47% |
| 下載失敗（無資料） | 14 家 | 37% |
| 下載失敗（錯誤） | 6 家 | 16% |
| 解析成功 (8/8) | 11 家 | 29% |
| 解析部分成功 | 3 家 | 8% |
| 解析失敗 | 4 家 | 11% |

---

## 詳細測試結果

### ✅ 下載成功 + 解析成功 (8/8) - 11 家

| 代碼 | 銀行名稱 | 下載 | 解析 | 備註 |
|------|----------|------|------|------|
| 03 | 合作金庫商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 04 | 第一商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 08 | 台北富邦銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 11 | 高雄銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 20 | 匯豐(台灣)商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 24 | 陽信商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 30 | 永豐商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 31 | 玉山商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 32 | 凱基商業銀行 | ✅ SUCCESS | ✅ 8/8 | |
| 40 | 連線商業銀行 | ✅ SUCCESS | ✅ 8/8 | LINE Bank |

### ⚠️ 下載成功 + 解析部分成功 - 3 家

| 代碼 | 銀行名稱 | 下載 | 解析 | 備註 |
|------|----------|------|------|------|
| 10 | 中國輸出入銀行 | ✅ SUCCESS | ⚠️ 3/8 | 政策性銀行，無消費金融業務 |
| 17 | 渣打國際商業銀行 | ✅ SUCCESS | ⚠️ 7/8 | 缺少 1 類別 |
| 37 | 中國信託商業銀行 | ✅ SUCCESS | ⚠️ 5/8 | 缺少 3 類別 |

### ❌ 下載成功 + 解析失敗 - 4 家

| 代碼 | 銀行名稱 | 下載 | 解析 | 問題描述 |
|------|----------|------|------|----------|
| 12 | 兆豐國際商業銀行 | ✅ SUCCESS | ❌ 0/8 | 找不到資產品質頁面 |
| 21 | 瑞興商業銀行 | ✅ SUCCESS | ❌ 0/8 | 找不到資產品質頁面（掃描式 PDF） |
| 23 | 臺灣新光商業銀行 | ✅ SUCCESS | ❌ 0/8 | 找不到資產品質頁面 |
| 27 | 聯邦商業銀行 | ✅ SUCCESS | ❌ 0/8 | PDF Pattern 解析錯誤 |
| 33 | 星展(台灣)商業銀行 | ✅ SUCCESS | ❌ 0/8 | 無法解析資料（特殊格式） |

### 📭 下載失敗（該季度無資料）- 14 家

| 代碼 | 銀行名稱 | 狀態 | 訊息 |
|------|----------|------|------|
| 01 | 臺灣銀行 | NO_DATA | 找不到 113年第四季 的資料 |
| 02 | 臺灣土地銀行 | NO_DATA | 找不到 113 年度的資料列 |
| 05 | 華南商業銀行 | NO_DATA | 找不到 113年第四季 的下載連結 |
| 06 | 彰化商業銀行 | NO_DATA | 尚無 113年第四季 的資料 |
| 07 | 上海商業儲蓄銀行 | NO_DATA | 尚無 113年 的資料 (目前: 114年) |
| 15 | 王道商業銀行 | NO_DATA | 尚無 113年第四季 的資料 |
| 19 | 京城商業銀行 | NO_DATA | 尚無 113年 的資料 (目前: 114年) |
| 25 | 板信商業銀行 | NO_DATA | 尚無 113年 的資料 |
| 26 | 三信商業銀行 | NO_DATA | 尚無 113年 的資料 |
| 28 | 遠東國際商業銀行 | NO_DATA | 尚無 113年第四季 的資料 |
| 29 | 元大商業銀行 | NO_DATA | 找不到 113年第四季 的資料 |
| 34 | 台新國際商業銀行 | NO_DATA | 找不到 113年Q4 的資料 |
| 36 | 安泰商業銀行 | NO_DATA | 尚無 113年 的資料 |

### 🔴 下載失敗（錯誤）- 6 家

| 代碼 | 銀行名稱 | 狀態 | 錯誤訊息 |
|------|----------|------|----------|
| 09 | 國泰世華商業銀行 | ERROR | Timeout 60000ms exceeded |
| 13 | 花旗（台灣）銀行 | ERROR | Timeout 60000ms exceeded |
| 16 | 臺灣中小企業銀行 | ERROR | No such file or directory: 'wget' |
| 18 | 台中商業銀行 | ERROR | Timeout 60000ms exceeded |
| 22 | 華泰商業銀行 | ERROR | Timeout 60000ms exceeded |
| 38 | 樂天國際商業銀行 | ERROR | BrowserType.launch: Executable doesn't exist |
| 41 | 將來商業銀行 | ERROR | Timeout 60000ms exceeded |

---

## 問題分析

### 1. 下載逾時 (Timeout) - 5 家

**受影響銀行**：國泰世華、花旗、台中商業、華泰、將來

**可能原因**：
- 網頁載入時間過長
- 網站結構變更
- 反爬蟲機制

**建議**：
- 增加 timeout 時間
- 檢查網站是否需要更新選擇器

### 2. 環境依賴問題 - 2 家

**受影響銀行**：
- 臺灣中小企業銀行：需要 wget 工具
- 樂天國際商業銀行：Playwright chromium 路徑問題

**建議**：
- 移除 wget 依賴，改用 Playwright 內建下載
- 重新安裝 Playwright：`python -m playwright install chromium`

### 3. PDF 解析失敗 - 5 家

**受影響銀行**：兆豐、瑞興、新光、聯邦、星展

**可能原因**：
- PDF 格式特殊（掃描式、加密、特殊編碼）
- 表格結構與預期不同
- pdfplumber 無法正確提取

**建議**：
- 使用 OCR 解析器處理掃描式 PDF
- 分析 PDF 結構，更新解析邏輯

### 4. 該季度無資料 - 14 家

**說明**：這些銀行可能尚未發布 113Q4 財報，或網站上僅保留最新幾季資料。

---

## 已下載檔案

```
data/113Q4/
├── 03_合作金庫商業銀行_113Q4.pdf
├── 04_第一商業銀行_113Q4.pdf
├── 08_台北富邦銀行_113Q4.pdf
├── 10_中國輸出入銀行_113Q4.pdf
├── 11_高雄銀行_113Q4.pdf
├── 12_兆豐國際商業銀行_113Q4.pdf
├── 17_渣打國際商業銀行_113Q4.pdf
├── 20_匯豐(台灣)商業銀行_113Q4.pdf
├── 21_瑞興商業銀行_113Q4.pdf
├── 23_臺灣新光商業銀行_113Q4.pdf
├── 24_陽信商業銀行_113Q4.pdf
├── 27_聯邦商業銀行_113Q4.pdf
├── 30_永豐商業銀行_113Q4.pdf
├── 31_玉山商業銀行_113Q4.pdf
├── 32_凱基商業銀行_113Q4.pdf
├── 33_星展(台灣)商業銀行_113Q4.pdf
├── 37_中國信託商業銀行_113Q4.pdf
└── 40_連線商業銀行_113Q4.pdf
```

共 18 個 PDF 檔案

---

## 統計圖表

### 下載狀態分布

```
下載成功 ████████████████████ 18 (47%)
無資料   █████████████████    14 (37%)
錯誤     ██████               6 (16%)
```

### 解析狀態分布（僅下載成功的 18 家）

```
完整成功 (8/8) ███████████████ 11 (61%)
部分成功      ███             3 (17%)
解析失敗      ████            4 (22%)
```

---

## 建議改進項目

### 高優先級

1. **修復 Timeout 問題**
   - 增加預設 timeout 至 120 秒
   - 加入重試機制

2. **移除 wget 依賴**
   - 台灣中小企業銀行改用 Playwright 下載

3. **重新安裝 Playwright**
   - 解決樂天銀行的 chromium 路徑問題

### 中優先級

4. **改進 PDF 解析**
   - 兆豐：分析 PDF 結構
   - 新光：分析 PDF 結構
   - 聯邦：處理 Pattern 錯誤
   - 星展：分析特殊格式

5. **啟用 OCR**
   - 瑞興銀行使用 OCR 解析

### 低優先級

6. **更新無資料銀行的下載器**
   - 確認是否為網站結構變更
   - 或該季度確實無資料

---

## 測試環境

- OS: macOS
- Python: 3.x
- Playwright: 已安裝
- pdfplumber: 已安裝

---

## 附錄：完整測試結果表

| 代碼 | 銀行名稱 | 下載狀態 | 下載訊息 | 解析狀態 | 解析類別 |
|------|----------|----------|----------|----------|----------|
| 01 | 臺灣銀行 | NO_DATA | 找不到 113年第四季 的資料 | SKIPPED | - |
| 02 | 臺灣土地銀行 | NO_DATA | 找不到 113 年度的資料列 | SKIPPED | - |
| 03 | 合作金庫商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 04 | 第一商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 05 | 華南商業銀行 | NO_DATA | 找不到 113年第四季 的下載連結 | SKIPPED | - |
| 06 | 彰化商業銀行 | NO_DATA | 尚無 113年第四季 的資料 | SKIPPED | - |
| 07 | 上海商業儲蓄銀行 | NO_DATA | 尚無 113年 的資料 | SKIPPED | - |
| 08 | 台北富邦銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 09 | 國泰世華商業銀行 | ERROR | Timeout 60000ms exceeded | SKIPPED | - |
| 10 | 中國輸出入銀行 | SUCCESS | 下載成功 | PARTIAL | 3/8 |
| 11 | 高雄銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 12 | 兆豐國際商業銀行 | SUCCESS | 下載成功 | FAILED | 0/8 |
| 13 | 花旗（台灣）銀行 | ERROR | Timeout 60000ms exceeded | SKIPPED | - |
| 15 | 王道商業銀行 | NO_DATA | 尚無 113年第四季 的資料 | SKIPPED | - |
| 16 | 臺灣中小企業銀行 | ERROR | No such file or directory: 'wget' | SKIPPED | - |
| 17 | 渣打國際商業銀行 | SUCCESS | 下載成功 | PARTIAL | 7/8 |
| 18 | 台中商業銀行 | ERROR | Timeout 60000ms exceeded | SKIPPED | - |
| 19 | 京城商業銀行 | NO_DATA | 尚無 113年 的資料 | SKIPPED | - |
| 20 | 匯豐(台灣)商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 21 | 瑞興商業銀行 | SUCCESS | 下載成功 | FAILED | 0/8 |
| 22 | 華泰商業銀行 | ERROR | Timeout 60000ms exceeded | SKIPPED | - |
| 23 | 臺灣新光商業銀行 | SUCCESS | 下載成功 | FAILED | 0/8 |
| 24 | 陽信商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 25 | 板信商業銀行 | NO_DATA | 尚無 113年 的資料 | SKIPPED | - |
| 26 | 三信商業銀行 | NO_DATA | 尚無 113年 的資料 | SKIPPED | - |
| 27 | 聯邦商業銀行 | SUCCESS | 下載成功 | FAILED | 0/8 |
| 28 | 遠東國際商業銀行 | NO_DATA | 尚無 113年第四季 的資料 | SKIPPED | - |
| 29 | 元大商業銀行 | NO_DATA | 找不到 113年第四季 的資料 | SKIPPED | - |
| 30 | 永豐商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 31 | 玉山商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 32 | 凱基商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 33 | 星展(台灣)商業銀行 | SUCCESS | 下載成功 | FAILED | 0/8 |
| 34 | 台新國際商業銀行 | NO_DATA | 找不到 113年Q4 的資料 | SKIPPED | - |
| 36 | 安泰商業銀行 | NO_DATA | 尚無 113年 的資料 | SKIPPED | - |
| 37 | 中國信託商業銀行 | SUCCESS | 下載成功 | PARTIAL | 5/8 |
| 38 | 樂天國際商業銀行 | ERROR | BrowserType.launch: Executable doesn't exist | SKIPPED | - |
| 40 | 連線商業銀行 | SUCCESS | 下載成功 | SUCCESS | 8/8 |
| 41 | 將來商業銀行 | ERROR | Timeout 60000ms exceeded | SKIPPED | - |
